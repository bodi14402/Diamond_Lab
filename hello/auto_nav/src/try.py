
# scan = [1.7451010942459106, 1.7471684217453003, 1.7493478059768677, 1.7606542110443115, 1.7439883947372437, 
#         1.7678142786026, 1.7417418956756592, 1.7740836143493652, 1.7607206106185913, 1.781270980834961,
#         1.7945106029510498, 1.7885149717330933, 1.798895001411438, 1.7912606000900269, 1.8084771633148193, 
#         1.8279155492782593, 1.808984637260437, 1.8605643510818481, 1.8490785360336304, 1.8823546171188354,
#         1.868011236190796, 1.8975416421890259, 1.8908699750900269, 1.9112333059310913, 1.950148582458496, 
#         1.9467804431915283, 1.9710966348648071, 1.9948424100875854, 1.9770432710647583, 2.033646583557129, 
#         2.052105188369751, 2.06341290473938, 2.097294807434082, 2.1280786991119385, 2.16068172454834, 
#         2.168856382369995, 2.2163467407226562, 2.2484147548675537, 2.259498119354248, 2.291189432144165, 
#         2.3442792892456055, 2.356468439102173, 2.424487352371216, 2.447692632675171, 2.418178081512451, 
#         2.3888347148895264, 2.347423791885376, 2.312546968460083, 2.272575616836548, 2.2351608276367188, 
#         2.207977533340454, 2.19053316116333, 2.142634391784668, 2.127483367919922, 2.096604824066162, 
#         2.0751399993896484, 2.0403878688812256, 2.0543243885040283, 1.9965012073516846, 1.9940255880355835, 
#         1.9676049947738647, 1.0150376558303833, 1.0653040409088135, 1.0980242490768433, 1.1501418352127075, 
#         1.1865216493606567, 1.2247415781021118, 1.3165762424468994, 1.3488820791244507, 1.396417498588562, 
#         1.4804260730743408, 1.5699435472488403, 1.65511953830719, 1.7657674551010132, 1.7899487018585205, 
#         1.789578914642334, 1.7774949073791504, 1.757423996925354, 1.7759424448013306, 1.7636117935180664, 
#         1.760073184967041, 1.749407172203064, 1.7337806224822998, 1.7609244585037231, 1.7229174375534058, 
#         1.741055965423584, 1.7212797403335571, 1.7267396450042725, 1.7298866510391235, 1.7372874021530151, 
#         1.7436202764511108, 1.732390284538269, 1.7328821420669556, 1.7394417524337769, 1.746769666671753,
#         1.7407552003860474, 1.7419403791427612, 0.779964029788971, 0.7539510726928711, 0.753840982913971, 
#         0.7257198095321655, 0.7224571704864502, 0.7056649327278137, 0.7259945273399353, 0.7058927416801453, 
#         0.7250346541404724, 0.7117204070091248, 0.7141243815422058, 0.6911059617996216, 0.7285929322242737, 
#         0.7285381555557251, 0.7442333698272705, 0.7710026502609253, 0.8042836785316467, 1.9235411882400513, 
#         1.9463332891464233, 1.9627838134765625, 1.9700192213058472, 1.9898688793182373, 2.020693778991699, 
#         2.038788080215454, 2.0787227153778076, 2.074223756790161, 2.0995805263519287, 2.129082202911377, 
#         2.1653943061828613, 2.187769889831543, 2.2078914642333984, 2.254901170730591, 2.2817583084106445, 
#         2.3276174068450928, 2.368971109390259, 2.40986704826355, 2.419896125793457, 2.3554720878601074, 
#         2.3337769508361816, 2.3063623905181885, 2.2713141441345215, 2.215101718902588, 2.1972882747650146, 
#         2.171797513961792, 2.150499105453491, 2.1176135540008545, 2.0747225284576416, 2.055743455886841, 
#         2.042109966278076, 1.9864813089370728, 2.0019619464874268, 1.9993411302566528, 1.9402437210083008, 
#         1.929633378982544, 1.9028457403182983, 1.8882625102996826, 1.8790148496627808, 1.8504916429519653, 
#         1.8511922359466553, 1.8464410305023193, 1.8293039798736572, 1.8096942901611328, 1.7964742183685303, 
#         1.7824053764343262, 1.3216831684112549, 1.395750880241394, 1.4669525623321533, 1.5783426761627197, 
#         1.6822359561920166, 1.7532680034637451, 1.7153825759887695, 1.7386479377746582, 1.7325299978256226, 
#         1.729411005973816, 0.7374110221862793, 0.7248002886772156, 0.7036986947059631, 0.6945425868034363, 
#         0.6605599522590637, 0.6827118396759033, 0.6502819657325745, 0.6821008324623108, 0.67332923412323, 
#         0.6565287709236145, 0.67779141664505, 0.6662642359733582, 0.6933833956718445, 0.6984108686447144, 
#         0.7085142135620117, 0.6961691975593567, 0.7282773852348328, 1.7198976278305054, 1.7354239225387573, 
#         1.7542827129364014, 1.7472898960113525, 1.7529617547988892, 1.7565641403198242, 1.7721716165542603, 
#         1.7747979164123535, 1.7868752479553223, 1.7882535457611084, 1.8178755044937134, 1.8320443630218506, 
#         1.8368725776672363, 1.840574860572815, 1.866505742073059, 1.8780990839004517, 1.885494589805603, 
#         1.907112956047058, 1.9431955814361572, 1.947479486465454, 1.9681458473205566, 1.9910269975662231, 
#         2.003073215484619, 2.03781795501709, 2.047455072402954, 2.0735135078430176, 2.100940465927124, 
#         2.123244524002075, 2.15299916267395, 2.196613311767578, 2.1875672340393066, 2.274484872817993, 
#         2.284437894821167, 2.322489023208618, 2.376997709274292, 2.3970351219177246, 2.383169651031494, 
#         2.3478477001190186, 2.30938720703125, 2.284691333770752, 2.2459168434143066, 2.2085587978363037, 
#         2.185746908187866, 2.154315710067749, 2.132572650909424, 2.1002941131591797, 2.06593656539917, 
#         2.0527477264404297, 1.5212277173995972, 1.5580068826675415, 1.6234750747680664, 1.6668369770050049, 
#         1.7310806512832642, 1.775937795639038, 1.8447209596633911, 1.8953884840011597, 1.8817826509475708, 
#         1.8578615188598633, 1.8468085527420044, 1.8412638902664185, 1.8356684446334839, 1.820708990097046, 
#         1.818634033203125, 1.8182908296585083, 1.768376350402832, 1.7893823385238647, 1.7573796510696411, 
#         1.7590456008911133, 1.7464332580566406, 1.7624709606170654, 1.74971604347229, 1.7333208322525024, 
#         0.8289083242416382, 0.8033125996589661, 0.7782021164894104, 0.7787550687789917, 0.7722869515419006, 
#         0.7595818042755127, 0.7559269666671753, 0.7470752596855164, 0.7553128600120544, 0.7401033639907837, 
#         0.7541635036468506, 0.7723082304000854, 0.7772547006607056, 0.7793556451797485, 0.8121640086174011, 
#         0.8233230113983154, 1.7477511167526245, 1.7321196794509888, 1.7417068481445312, 1.7689214944839478, 
#         1.7505780458450317, 1.7695965766906738, 1.7750935554504395, 1.7814308404922485, 1.7769960165023804, 
#         1.7848740816116333, 1.8044931888580322, 1.8232518434524536, 1.814198613166809, 1.8442145586013794, 
#         1.875183343887329, 1.8635226488113403, 1.8678795099258423, 1.9060245752334595, 1.9166141748428345, 
#         1.914659857749939, 1.9471431970596313, 1.970314860343933, 1.9814845323562622, 2.0123116970062256, 
#         2.01411509513855, 2.0279319286346436, 2.07468843460083, 2.0930228233337402, 2.126213312149048, 
#         2.1747047901153564, 2.1957931518554688, 2.212836503982544, 2.246189594268799, 2.2800447940826416, 
#         2.3465328216552734, 2.364851951599121, 2.3945839405059814, 2.4455666542053223, 2.4270029067993164, 
#         2.372466802597046, 2.3287887573242188, 2.2855122089385986, 1.1109706163406372, 1.1317427158355713, 
#         1.149915337562561, 1.192393183708191, 1.2200261354446411, 1.2435945272445679, 1.2829161882400513, 
#         1.3060410022735596, 1.3531625270843506, 1.387590765953064, 1.4373215436935425, 1.4733386039733887, 
#         1.5194549560546875, 1.598555088043213, 1.6347700357437134, 1.7048031091690063, 1.7761696577072144, 
#         1.8351919651031494, 1.8779504299163818, 1.874329924583435, 1.8646914958953857, 1.8486192226409912, 
#         1.8219950199127197, 1.8082951307296753, 1.8204742670059204, 1.8016669750213623, 1.8026586771011353, 
#         1.79185152053833, 1.7671517133712769, 1.7859477996826172, 1.7600606679916382, 1.7804838418960571, 
#         1.7761882543563843, 1.7565696239471436, 1.7324775457382202, 1.7480580806732178, 1.7642756700515747, 
#         1.7397922277450562, 1.7591215372085571, 1.765244722366333, 1.7516437768936157, 1.7437314987182617]


# max_scan = max(scan)
# max_index = scan.index(max_scan)
# print("max_scan : ",max_scan, max_index)




# first_diff_scan = abs(scan[1]-scan[0])
# arr_unseen = []
# last_i = 0
# arr_seq = []
# for i in range(1, len(scan)):
#     diff_scan = abs(scan[i]-scan[i-1])
#     if ((10*first_diff_scan < diff_scan) or (first_diff_scan > 10*diff_scan)):
#         if (i-last_i == 1):
#             arr_unseen.append(last_i)
#         last_i = i
#         print(i, diff_scan, first_diff_scan)
#     first_diff_scan = diff_scan
# arr_seq.append(arr_unseen[0])
# for i in range(1, len(arr_unseen)):
#     if arr_unseen[i] != arr_unseen[i - 1] + 1:
#         arr_seq.append(arr_unseen[i])

# print(arr_unseen)
# print(arr_seq)






# #!/usr/bin/env python3

# import rospy
# import actionlib
# from move_base_msgs.msg import MoveBaseAction, MoveBaseGoal
# import random
# import time

# # Callbacks definition
# start_time = time.time()
# exploration_time = 60
# def active_cb():
#     rospy.loginfo("Goal pose being processed")

# def feedback_cb(feedback):
#     rospy.loginfo("Current location: "+str(feedback))

# def done_cb(status, result):
#     if status == 3:
#         rospy.loginfo("Goal reached")
#     if status == 2 or status == 8:
#         rospy.loginfo("Goal cancelled")
#     if status == 4:
#         rospy.loginfo("Goal aborted")

# def generate_random_goal():
#     goal = MoveBaseGoal()
#     goal.target_pose.header.frame_id = "map"
#     goal.target_pose.header.stamp = rospy.Time.now()
#     # Randomize goal location within certain map bounds
#     goal.target_pose.pose.position.x = random.uniform(-2, 2)  # modify range as per the map size
#     goal.target_pose.pose.position.y = random.uniform(-2, 2)  # modify range as per the map size
#     goal.target_pose.pose.position.z = 0.0
#     goal.target_pose.pose.orientation.x = 0.0
#     goal.target_pose.pose.orientation.y = 0.0
#     goal.target_pose.pose.orientation.z = 0.0
#     goal.target_pose.pose.orientation.w = 1.0 # facing forward
#     return goal

# rospy.init_node('random_explorer')

# navclient = actionlib.SimpleActionClient('move_base',MoveBaseAction)
# navclient.wait_for_server()

# # Exploration loop
# while not rospy.is_shutdown() and time.time() - start_time < exploration_time:
#     goal = generate_random_goal()
#     rospy.loginfo("Sending new random goal")
#     navclient.send_goal(goal, done_cb, active_cb, feedback_cb)
#     # Wait for the result
#     finished_within_time = navclient.wait_for_result(rospy.Duration(25))  # Adjust duration to match exploration time needs
#     if not finished_within_time:
#         navclient.cancel_goal()
#         rospy.loginfo("Timed out achieving goal")























# #!/usr/bin/env python3

# import rospy
# import actionlib
# from move_base_msgs.msg import MoveBaseAction, MoveBaseGoal
# from geometry_msgs.msg import Twist
# import random
# import time


# # Define publishers and action clients
# rospy.init_node('random_explorer')

# cmd_vel_pub = rospy.Publisher("cmd_vel", Twist, queue_size=10)
# navclient = actionlib.SimpleActionClient('move_base', MoveBaseAction)
# navclient.wait_for_server()


# # task_done = False

# # Callbacks definition
# start_time = time.time()
# exploration_time = 60  # total time allocated for exploration

# def active_cb():
#     rospy.loginfo("Goal pose being processed")

# def feedback_cb(feedback):
#     # rospy.loginfo("Current location: " + str(feedback.base_position.pose))
#     pass

# def done_cb(status, result):
#     if status in [actionlib.GoalStatus.SUCCEEDED, actionlib.GoalStatus.ABORTED, actionlib.GoalStatus.PREEMPTED]:
#         rospy.loginfo(f"Goal completed with status : {status} // result = {result}")
#         rospy.sleep(1)
#         rospy.loginfo("send_new_goal")
#         # generate_random_goal()
#         if time.time() - start_time < exploration_time:
#             random_x = random.uniform(-1.4, 1.4)
#             random_y = random.uniform(-1.4, 1.4)
#             goal = MoveBaseGoal()
#             goal.target_pose.header.frame_id = "map"
#             goal.target_pose.header.stamp = rospy.Time.now()
#             # Randomize goal location within certain map bounds
#             goal.target_pose.pose.position.x = random_x  # modify range as per the map size
#             goal.target_pose.pose.position.y = random_y  # modify range as per the map size
#             goal.target_pose.pose.position.z = 0.0
#             goal.target_pose.pose.orientation.x = 0.0
#             goal.target_pose.pose.orientation.y = 0.0
#             goal.target_pose.pose.orientation.z = 0.0
#             goal.target_pose.pose.orientation.w = 1.0 # facing forward
#             rospy.loginfo(f"Sending new random goal : x = {random_x}, y = {random_y}")
#             # navclient.send_goal(goal, done_cb, active_cb, feedback_cb)
#             navclient.send_goal(goal, done_cb, active_cb)


# def generate_random_goal():
#     # if navclient.get_result() in [actionlib.GoalStatus.SUCCEEDED, actionlib.GoalStatus.ABORTED, actionlib.GoalStatus.PREEMPTED]:
#     rospy.loginfo(navclient.simple_state)
#     # if time.time() - start_time < exploration_time and navclient.simple_state != actionlib.SimpleGoalState.ACTIVE:
#     random_x = random.uniform(-1.4, 1.4)
#     random_y = random.uniform(-1.4, 1.4)
#     goal = MoveBaseGoal()
#     goal.target_pose.header.frame_id = "map"
#     goal.target_pose.header.stamp = rospy.Time.now()
#     # Randomize goal location within certain map bounds
#     goal.target_pose.pose.position.x = random_x  # modify range as per the map size
#     goal.target_pose.pose.position.y = random_y  # modify range as per the map size
#     goal.target_pose.pose.position.z = 0.0
#     goal.target_pose.pose.orientation.x = 0.0
#     goal.target_pose.pose.orientation.y = 0.0
#     goal.target_pose.pose.orientation.z = 0.0
#     goal.target_pose.pose.orientation.w = 1.0 # facing forward
#     rospy.loginfo(f"Sending new random goal : x = {random_x}, y = {random_y}")
#     # navclient.send_goal(goal, done_cb, active_cb, feedback_cb)
#     navclient.send_goal(goal, done_cb, active_cb)

# generate_random_goal()

# # Keep the node running while there's time left for exploration
# while not rospy.is_shutdown() and time.time() - start_time < exploration_time:
#     rospy.sleep(1)

# rospy.loginfo("Exploration time ended.")
# stop = Twist()
# cmd_vel_pub.publish(stop)
# navclient.cancel_all_goals()



from datetime import datetime

file_name = f'auto_map_{datetime.now().strftime("%Y%m%d-%H%M%S")}'
command = f"rosrun map_server map_server -f /catkin_ws/src/week2_navigation/maps/{file_name}"

print(command)
